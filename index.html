<!DOCTYPE html>
<html lang="en">
<head>
    <title>Crypto Clicker</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="images/favicon_placeholder_16x16.ico" />

    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Load Stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* This ensures the body and html use the full viewport dimensions and removes margins */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            /* Use a monospaced font for a 'digital' feel */
            font-family: monospace;
        }
    </style>
</head>
<body class="bg-slate-800 h-full w-full">

<!-- Main Full-Screen Container -->
<div class="w-full h-screen flex flex-col bg-slate-800 overflow-hidden">

    <!-- TOP HEADER -->
    <header class="h-24 flex justify-between items-stretch border-b border-slate-700 bg-slate-900">
        <!-- Header Left: Game Title -->
        <div id="header-title-area" class="w-full md:w-1/2 flex items-center p-4">
            <!-- ADDED ID HERE: Game title will be updated by JS -->
            <h1 id="game-title" class="text-4xl font-extrabold text-indigo-400 tracking-wider pl-4">CRYPTO CLICKER</h1>
        </div>

        <!-- Header Right: Tabs (Updated with simplified styling) -->
        <nav id="header-tabs-area" class="w-full md:w-1/2 flex items-stretch border-l border-slate-700">
            <!-- All buttons now share the same base styling and rely on JS to set the active state -->
            <button data-tab="upgrades" id="tab-upgrades" class="tab-button flex-1 px-4 text-center text-lg font-bold transition duration-150 text-slate-400 border-b-2 border-transparent hover:bg-slate-700">
                Upgrades
            </button>
            <button data-tab="stats" id="tab-stats" class="tab-button flex-1 px-4 text-center text-lg font-bold transition duration-150 text-slate-400 border-b-2 border-transparent hover:bg-slate-700">
                Stats
            </button>
            <button data-tab="achievements" id="tab-achievements" class="tab-button flex-1 px-4 text-center text-lg font-bold transition duration-150 text-slate-400 border-b-2 border-transparent hover:bg-slate-700">
                Achievements
            </button>
            <button data-tab="options" id="tab-options" class="tab-button flex-1 px-4 text-center text-lg font-bold transition duration-150 text-slate-400 border-b-2 border-transparent hover:bg-slate-700">
                Options
            </button>
            <!-- START: New Admin Tab (Hidden by Default) -->
            <button data-tab="admin" id="tab-admin" class="tab-button flex-1 px-4 text-center text-lg font-bold transition duration-150 text-slate-400 border-b-2 border-transparent hover:bg-slate-700 hidden">
                Admin
            </button>
            <!-- END: New Admin Tab -->
        </nav>
    </header>

    <!-- MAIN GAME CONTENT AREA -->
    <!-- The main content flex container ensures the two halves fill the remaining vertical space -->
    <div class="flex flex-1 overflow-hidden">

        <!-- Left Half: Clicker Area -->
        <div id="clicker-area" class="w-full md:w-1/2 flex flex-col items-center justify-center p-8 bg-slate-900 border-r border-slate-700 overflow-y-auto">
            <p class="text-4xl font-mono mb-12">
                <span id="clicks-display" class="text-green-400">0</span> <span class="text-xl">Clicks</span>
            </p>

            <!-- Updated Clicker Button Structure -->
            <button id="clicker-button" class="clicker-button-round w-64 h-64 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white font-bold py-4 px-8 rounded-full text-2xl transition duration-150 ease-in-out transform hover:scale-105 active:scale-100 shadow-xl flex items-center justify-center overflow-hidden">
                <span id="clicker-button-text" class="clicker-text">Mine!</span>
                <img id="clicker-button-image" src="./images/placeholder_600x400.jpg" alt="Click Me" class="clicker-image hidden w-full h-full object-cover">
            </button>

            <p class="mt-8 text-lg text-slate-400">
                Click Power (CP): <span id="cpc-display">1</span>
            </p>
        </div>

        <!-- Right Half: Tab Content Area -->
        <div id="tab-content-area" class="w-full md:w-1/2 flex flex-col bg-slate-800 p-6 overflow-y-auto">

            <!-- TAB PANEL 1: UPGRADES (Default View) -->
            <!-- The content and names of these will be dynamically changed by JS -->
            <div id="panel-upgrades" class="tab-panel flex flex-col">
                <h2 class="text-3xl font-bold text-sky-400 mb-6 border-b border-slate-700 pb-3">Available Upgrades</h2>

                <!-- Upgrade 1: CPC Upgrade -->
                <div id="upgrade-panel-1" class="upgrade-item bg-slate-700 p-4 rounded-xl shadow-lg flex justify-between items-center mb-4 border border-slate-600">
                    <div class="flex-grow" id="upgrade-1-details">
                        <!-- Default Crypto Text (Will be overwritten by JS when in Pencil Mode) -->
                        <p class="text-lg font-bold text-emerald-400">CPU Overclock</p>
                        <p class="text-sm text-slate-400">Increases clicks per manual click (CP) by 1.</p>
                        <p class="text-xs text-slate-400 mt-1">Level: <span id="upgrade-level-1">0</span></p>
                    </div>
                    <button id="buy-upgrade-1" class="ml-4 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                        Buy (<span id="upgrade-cost-1">10</span>)
                    </button>
                </div>
                
                <!-- Upgrade 2: CPS Upgrade -->
                <div id="upgrade-panel-2" class="upgrade-item bg-slate-700 p-4 rounded-xl shadow-lg flex justify-between items-center mb-4 border border-slate-600">
                    <div class="flex-grow" id="upgrade-2-details">
                        <!-- Default Crypto Text (Will be overwritten by JS when in Pencil Mode) -->
                        <p class="text-lg font-bold text-yellow-400">GPU Miner</p>
                        <p class="text-sm text-slate-400">Adds 5 clicks per second (CPS).</p>
                        <p class="text-xs text-slate-400 mt-1">Level: <span id="upgrade-level-2">0</span></p>
                    </div>
                    <button id="buy-upgrade-2" class="ml-4 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                        Buy (<span id="upgrade-cost-2">100</span>)
                    </button>
                </div>
            </div>

            <!-- TAB PANEL 2: STATS (Hidden by default) -->
            <div id="panel-stats" class="tab-panel hidden flex flex-col">
                <h2 class="text-3xl font-bold text-sky-400 mb-6 border-b border-slate-700 pb-3">Detailed Statistics</h2>
                <div class="space-y-4 text-xl text-slate-300">
                    <p>Total Clicks Earned: <span id="stats-total-clicks" class="font-mono text-green-400">0</span></p>
                    <p>Click Power (CP): <span id="stats-cpc" class="font-mono text-emerald-400">1</span></p>
                    <p>Clicks Per Second (CPS): <span id="stats-cps" class="font-mono text-amber-400">0</span></p>
                    <p class="pt-4 border-t border-slate-700">Total Upgrades Bought: <span id="stats-total-upgrades" class="font-mono text-indigo-400">0</span></p>
                    <p class="text-sm text-slate-500 italic">Local User ID: <span id="user-id-display" class="font-mono text-xs break-all">Loading...</span></p>
                </div>
            </div>

            <!-- TAB PANEL 3: ACHIEVEMENTS (Hidden by default) -->
            <div id="panel-achievements" class="tab-panel hidden flex flex-col">
                <h2 class="text-3xl font-bold text-sky-400 mb-6 border-b border-slate-700 pb-3">Achievements</h2>
                <p class="text-slate-400 text-lg">No achievements unlocked yet. Get clicking!</p>
            </div>

            <!-- TAB PANEL 4: OPTIONS (Hidden by default) -->
            <div id="panel-options" class="tab-panel hidden flex flex-col space-y-6">
                <h2 class="text-3xl font-bold text-sky-400 border-b border-slate-700 pb-3">Options</h2>
                
                <!-- START: New Mode Switch Area (Initially hidden, only shown in Pencil Mode) -->
                <div id="mode-switch-area" class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600 hidden">
                    <p class="text-lg font-bold text-indigo-400 mb-3">Game Mode Switch</p>
                    <p class="text-sm text-slate-400 mb-4">You are currently playing <span id="current-mode-display" class="font-bold">Titus Clicker</span>. Switch back to the original game mode.</p>
                    <button id="switch-to-crypto-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition">
                        Switch to Crypto Clicker
                    </button>
                </div>
                <!-- END: New Mode Switch Area -->
                
                <!-- Code Input Area -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-lg font-bold text-red-400 mb-3">Redeem Code</p>
                    <p class="text-sm text-slate-400 mb-4">Insert a special secret code here to unlock a bonus.</p>
                    <div class="flex space-x-3">
                        <input type="text" id="code-input" placeholder="Enter code here..." class="flex-grow p-2 rounded bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500">
                        <button id="redeem-code-button" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition disabled:opacity-50 disabled:cursor-not-allowed">
                            Redeem
                        </button>
                    </div>
                    <p id="code-message" class="mt-3 text-sm italic text-slate-400"></p>
                </div>

                <!-- Reset Game Data Area -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-lg font-bold text-yellow-400 mb-3">Game Data</p>
                    <p class="text-sm text-slate-400 mb-4">If the game is acting strangely, you can reset all progress stored in this browser.</p>
                    <button id="reset-data-button" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded transition disabled:opacity-50 disabled:cursor-not-allowed">
                        Reset All Data
                    </button>
                    <!-- This is the message display area for the reset confirmation -->
                    <p id="reset-message" class="mt-3 text-sm italic text-slate-400"></p> 
                </div>
            </div>

            <!-- TAB PANEL 5: ADMIN (Hidden by default) -->
            <div id="panel-admin" class="tab-panel hidden flex flex-col space-y-6">
                <h2 class="text-3xl font-bold text-red-400 border-b border-slate-700 pb-3">ADMIN TOOLS</h2>
                <p class="text-lg text-slate-300">Welcome, Administrator. Directly manipulate game variables here. (Must enter a number, minimum 0.)</p>

                <!-- Admin Tool Group 1: Set Clicks -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-xl font-bold text-red-300 mb-3">Set Clicks (Current: <span id="admin-current-clicks">0</span>)</p>
                    <div class="flex space-x-3">
                        <input type="number" min="0" id="admin-input-clicks" placeholder="Enter new click amount..." class="flex-grow p-2 rounded bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500" value="0">
                        <button id="admin-btn-set-clicks" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition">
                            Set Clicks
                        </button>
                    </div>
                    <p id="admin-msg-clicks" class="mt-3 text-sm italic text-slate-400"></p>
                </div>

                <!-- Admin Tool Group 2: Set Click Power (CPC) - Independent -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-xl font-bold text-red-300 mb-3">Set Click Power (CP) <span class="text-sm text-slate-400">(Overrides upgrade calculation!)</span> (Current: <span id="admin-current-cpc">1</span>)</p>
                    <div class="flex space-x-3">
                        <input type="number" min="1" id="admin-input-cpc" placeholder="Enter new CP value..." class="flex-grow p-2 rounded bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500" value="1">
                        <button id="admin-btn-set-cpc" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition">
                            Set CP
                        </button>
                    </div>
                    <p id="admin-msg-cpc" class="mt-3 text-sm italic text-slate-400"></p>
                </div>

                <!-- Admin Tool Group 3: Set Clicks Per Second (CPS) - Independent -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-xl font-bold text-red-300 mb-3">Set Clicks Per Second (CPS) <span class="text-sm text-slate-400">(Overrides upgrade calculation!)</span> (Current: <span id="admin-current-cps">0</span>)</p>
                    <div class="flex space-x-3">
                        <input type="number" min="0" id="admin-input-cps" placeholder="Enter new CPS value..." class="flex-grow p-2 rounded bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500" value="0">
                        <button id="admin-btn-set-cps" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition">
                            Set CPS
                        </button>
                    </div>
                    <p id="admin-msg-cps" class="mt-3 text-sm italic text-slate-400"></p>
                </div>

                <!-- Admin Tool Group 4: Set CPU Overclock Level -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-xl font-bold text-red-300 mb-3">Set CPU Overclock Level (Current: <span id="admin-current-cpu-level">0</span>)</p>
                    <div class="flex space-x-3">
                        <input type="number" min="0" id="admin-input-cpu-level" placeholder="Enter new CPU level..." class="flex-grow p-2 rounded bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500" value="0">
                        <button id="admin-btn-set-cpu-level" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition">
                            Set Level
                        </button>
                    </div>
                    <p id="admin-msg-cpu-level" class="mt-3 text-sm italic text-slate-400"></p>
                </div>

                <!-- Admin Tool Group 5: Set GPU Miner Level -->
                <div class="bg-slate-700 p-6 rounded-xl shadow-lg border border-slate-600">
                    <p class="text-xl font-bold text-red-300 mb-3">Set GPU Miner Level (Current: <span id="admin-current-gpu-level">0</span>)</p>
                    <div class="flex space-x-3">
                        <input type="number" min="0" id="admin-input-gpu-level" placeholder="Enter new GPU level..." class="flex-grow p-2 rounded bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500" value="0">
                        <button id="admin-btn-set-gpu-level" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition">
                            Set Level
                        </button>
                    </div>
                    <p id="admin-msg-gpu-level" class="mt-3 text-sm italic text-slate-400"></p>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Core App Setup -->
<script type="module">
    // Load the external script file, which exports the initializeGame function.
    import { initializeGame } from "./script.js";

    // CRITICAL: Call the exported function immediately to start the app setup.
    initializeGame(); 
</script>

</body>
</html>
